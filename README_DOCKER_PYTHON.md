# ğŸ Python Docker éƒ¨ç½²æ–¹æ¡ˆ

çº¯Pythonæ–¹æ¡ˆï¼ŒåŒ…å«æ— å¤´æµè§ˆå™¨ã€å¤šè´¦å·ç®¡ç†å’ŒAPIä»£ç†æœåŠ¡ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1ï¼šç›´æ¥è¿è¡Œï¼ˆæ¨èï¼‰

```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt
playwright install chromium

# 2. é…ç½®è´¦å·
cp accounts.example.json accounts.json
nano accounts.json

# 3. è¿è¡Œ
python3 multi-account-manager.py
```

### æ–¹å¼2ï¼šDockeréƒ¨ç½²

```bash
# 1. æ„å»ºé•œåƒ
docker build -t gemini-manager:latest .

# 2. å‡†å¤‡é…ç½®
cp accounts.example.json accounts.json
# ç¼–è¾‘ accounts.json

# 3. è¿è¡Œå®¹å™¨
docker run -d \
  --name gemini-manager \
  --restart unless-stopped \
  -p 8081:8081 \
  -v $(pwd)/accounts.json:/app/accounts.json:ro \
  -v $(pwd)/config:/app/config \
  -e TZ=Asia/Shanghai \
  gemini-manager:latest

# 4. æŸ¥çœ‹æ—¥å¿—
docker logs -f gemini-manager
```

### æ–¹å¼3ï¼šDocker Compose

```bash
# 1. å‡†å¤‡é…ç½®
cp accounts.example.json accounts.json
nano accounts.json

# 2. å¯åŠ¨
docker-compose -f docker-compose-python.yml up -d

# 3. æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose-python.yml logs -f
```

## ğŸ“ æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `multi-account-manager.py` | æ ¸å¿ƒç®¡ç†å™¨ï¼ˆæµè§ˆå™¨è‡ªåŠ¨åŒ– + è´¦å·ç®¡ç†ï¼‰ |
| `accounts.json` | è´¦å·é…ç½®ï¼ˆéœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼‰ |
| `requirements.txt` | Pythonä¾èµ– |
| `Dockerfile` | Dockeræ„å»ºæ–‡ä»¶ |
| `docker-compose-python.yml` | Dockerç¼–æ’é…ç½® |

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. æ— å¤´æµè§ˆå™¨è‡ªåŠ¨ç™»å½•
```python
# è‡ªåŠ¨æµç¨‹
1. æ‰“å¼€æµè§ˆå™¨ â†’ business.gemini.google
2. å¡«å†™é‚®ç®± â†’ ç‚¹å‡»ä¸‹ä¸€æ­¥
3. å¡«å†™å¯†ç ï¼ˆå¯é€‰ï¼‰â†’ ç‚¹å‡»ä¸‹ä¸€æ­¥
4. æ£€æµ‹éªŒè¯ç  â†’ ç­‰å¾…ç”¨æˆ·è¾“å…¥
5. ç™»å½•æˆåŠŸ â†’ æ•è·Token
```

### 2. éªŒè¯ç åå°è¾“å…¥
```bash
# è¿è¡Œæ—¶æç¤º
ğŸš¨ éœ€è¦éªŒè¯ç : è¯·è¾“å…¥6ä½éªŒè¯ç 
è¯·è¾“å…¥éªŒè¯ç : 123456
âœ… éªŒè¯æˆåŠŸ
```

### 3. å¤šè´¦å·è½®è®­
```json
{
  "accounts": [
    {"email": "user1@example.com", "is_active": true},
    {"email": "user2@example.com", "is_active": true},
    {"email": "user3@example.com", "is_active": true}
  ]
}
```

**è½®è®­é€»è¾‘ï¼š**
- æŒ‰ä½¿ç”¨æ¬¡æ•°æ’åº
- 50åˆ†é’Ÿåæ£€æŸ¥
- è‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€ä¸ª

### 4. DockeræœåŠ¡ç®¡ç†
```python
# è‡ªåŠ¨æ‰§è¡Œ
docker stop gemini-proxy
docker rm gemini-proxy
docker run -d ... (æ–°è´¦å·)
```

## ğŸ”§ é…ç½®è¯´æ˜

### accounts.json æ ¼å¼
```json
{
  "accounts": [
    {
      "email": "your-email@example.com",
      "password": "å¯é€‰ï¼Œå¦‚æœéœ€è¦å¯†ç ",
      "bearer_token": "è‡ªåŠ¨è·å–",
      "config_id": "è‡ªåŠ¨è·å–",
      "last_used": 0,
      "usage_count": 0,
      "is_active": true
    }
  ]
}
```

### ç¯å¢ƒå˜é‡
```bash
# Pythonç¯å¢ƒ
PYTHONUNBUFFERED=1    # å®æ—¶è¾“å‡ºæ—¥å¿—
TZ=Asia/Shanghai      # æ—¶åŒº
```

## ğŸ“Š è¿è¡ŒçŠ¶æ€

### æŸ¥çœ‹ç®¡ç†å™¨çŠ¶æ€
```bash
# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep multi-account-manager

# æŸ¥çœ‹æ—¥å¿—
docker logs -f gemini-manager

# æŸ¥çœ‹è´¦å·çŠ¶æ€
cat accounts.json
```

### æŸ¥çœ‹APIæœåŠ¡çŠ¶æ€
```bash
# æŸ¥çœ‹DockeræœåŠ¡
docker ps | grep gemini-proxy

# æŸ¥çœ‹APIæ—¥å¿—
docker logs -f gemini-proxy

# æµ‹è¯•API
curl http://localhost:8080/health
```

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯åŠ¨ Python ç®¡ç†å™¨                     â”‚
â”‚  (Docker æˆ– æœ¬åœ°è¿è¡Œ)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯»å– accounts.json                     â”‚
â”‚  é€‰æ‹©ä½¿ç”¨æœ€å°‘çš„è´¦å·                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ— å¤´æµè§ˆå™¨è‡ªåŠ¨ç™»å½•                     â”‚
â”‚  - æ‰“å¼€ business.gemini.google          â”‚
â”‚  - å¡«å†™é‚®ç®±ã€å¯†ç                        â”‚
â”‚  - æ£€æµ‹éªŒè¯ç è¾“å…¥æ¡†                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç­‰å¾…éªŒè¯ç è¾“å…¥                         â”‚
â”‚  - å‘½ä»¤è¡Œè¾“å…¥                           â”‚
â”‚  - æˆ– HTTP API è¾“å…¥                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç™»å½•æˆåŠŸï¼Œæ•è· Token + Config ID       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ›´æ–° accounts.json                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éƒ¨ç½²åˆ° Docker (gemini-proxy)           â”‚
â”‚  - åœæ­¢æ—§å®¹å™¨                           â”‚
â”‚  - åˆ é™¤æ—§å®¹å™¨                           â”‚
â”‚  - å¯åŠ¨æ–°å®¹å™¨ï¼ˆæ–°è´¦å·ï¼‰                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åå°ç›‘æ§ï¼ˆ5åˆ†é’Ÿæ£€æŸ¥ï¼‰                  â”‚
â”‚  - Tokenå¿«è¿‡æœŸï¼Ÿ                        â”‚
â”‚  - è‡ªåŠ¨è½®æ¢ä¸‹ä¸€ä¸ªè´¦å·                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### æœ¬åœ°è¿è¡Œ
```bash
# å¯åŠ¨
python3 multi-account-manager.py

# åå°è¿è¡Œ
nohup python3 multi-account-manager.py > manager.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f manager.log

# åœæ­¢
pkill -f multi-account-manager
```

### Dockerè¿è¡Œ
```bash
# æ„å»º
docker build -t gemini-manager:latest .

# è¿è¡Œ
docker run -d --name gemini-manager -p 8081:8081 \
  -v $(pwd)/accounts.json:/app/accounts.json:ro \
  gemini-manager:latest

# æŸ¥çœ‹æ—¥å¿—
docker logs -f gemini-manager

# åœæ­¢
docker stop gemini-manager
docker rm gemini-manager
```

### Docker Compose
```bash
# å¯åŠ¨
docker-compose -f docker-compose-python.yml up -d

# åœæ­¢
docker-compose -f docker-compose-python.yml down

# é‡å¯
docker-compose -f docker-compose-python.yml restart
```

## ğŸ” æ•…éšœæ’é™¤

### 1. æµè§ˆå™¨å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥Chromiumæ˜¯å¦å®‰è£…
docker exec gemini-manager which chromium

# é‡æ–°å®‰è£…Playwright
docker exec gemini-manager playwright install chromium
```

### 2. éªŒè¯ç æ— æ³•æ˜¾ç¤º
```bash
# åˆ‡æ¢åˆ°æœ‰å¤´æ¨¡å¼è°ƒè¯•
# ä¿®æ”¹ multi-account-manager.py
headless=False
```

### 3. Tokenè·å–å¤±è´¥
```bash
# æ£€æŸ¥ç½‘ç»œ
docker exec gemini-manager curl -I https://business.gemini.google

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker logs --tail=100 gemini-manager
```

### 4. Dockeræƒé™é—®é¢˜
```bash
# éœ€è¦è®¿é—®Dockerå®ˆæŠ¤è¿›ç¨‹
# åœ¨å®¿ä¸»æœºä¸Šè¿è¡Œï¼Œæˆ–æŒ‚è½½ /var/run/docker.sock
docker run -v /var/run/docker.sock:/var/run/docker.sock ...
```

## ğŸ“¦ é•œåƒå¤§å°ä¼˜åŒ–

```dockerfile
# å½“å‰é•œåƒå¤§å°ï¼šçº¦ 800MB
# ä¼˜åŒ–åï¼šçº¦ 600MB

# ä¼˜åŒ–æ–¹æ³•ï¼š
# 1. ä½¿ç”¨å¤šé˜¶æ®µæ„å»º
# 2. æ¸…ç†ç¼“å­˜
# 3. ç§»é™¤ä¸å¿…è¦çš„æ–‡ä»¶
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šå¼€å‘æµ‹è¯•
```bash
# æœ¬åœ°è¿è¡Œï¼Œè°ƒè¯•æ–¹ä¾¿
python3 multi-account-manager.py
```

### åœºæ™¯2ï¼šç”Ÿäº§éƒ¨ç½²
```bash
# Dockeréƒ¨ç½²ï¼Œç¨³å®šå¯é 
docker-compose -f docker-compose-python.yml up -d
```

### åœºæ™¯3ï¼šå¤šæœåŠ¡å™¨
```bash
# æ¯ä¸ªæœåŠ¡å™¨ä¸€ä¸ªç®¡ç†å™¨
# å…±äº« accounts.jsonï¼ˆNFS/å¯¹è±¡å­˜å‚¨ï¼‰
```

---

**æç¤º**: é¦–æ¬¡ä½¿ç”¨å»ºè®®æœ¬åœ°è¿è¡Œè°ƒè¯•ï¼Œç¡®è®¤æ­£å¸¸åå†éƒ¨ç½²åˆ°Dockerã€‚